/*

А.Киселев 07.04.2011

ПЗО Разовая комиссия (Нов) 4602

Доработка для LIFE ПРББ. Поле "Счет" заполняется: номер счета клиента по ДО, номер счета клиента 47423*,  номер счета клиента 60312*

*/
import  BankInter, "paym_rec.mac", "cbsttls.mac";

/* EVG 13/02/2012 To 2030 Другая структура.
private record sfsingdfRec( "sfsingdf.dbt" );*/
private record sfsingdfRec( "sfdef.dbt" );


macro ExecuteStep( outBuff, primIn )

var stat = 0;
 setbuff( sfsingdfRec, primIn  );

 if (substr(sfsingdfRec.AccountPayer,1,5) == "40702")
  if (УстановитьСтатусыПлатежа(522, 1 ))
   msgbox("Ошибка при установке статуса платежа");
   return 1;
  end; 
 elif (substr(sfsingdfRec.AccountPayer,1,5) == "47423") 
  if (УстановитьСтатусыПлатежа(522, 2 ))
   msgbox("Ошибка при установке статуса платежа");
   return 1;
  end; 
 elif (substr(sfsingdfRec.AccountPayer,1,5) == "60312") 
  if (УстановитьСтатусыПлатежа(522, 3 ))
   msgbox("Ошибка при установке статуса платежа");
   return 1;
  end; 
 end;

 return 0;
END;
